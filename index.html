<!doctype html>
<html lang="en" ng-app="beerfest">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Beer Fest</title>

    <link rel="stylesheet" href="css/beerfest.css">

    <script src="js/vendor/jquery-2.1.4.min.js"></script>
    <script src="js/vendor/angular-1.4.8.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/1.1.3/angularfire.min.js"></script>
    <script src="js/beerfest.js"></script>

</head>
<body class="global">

    <!-- this is the element that we will put the svg sprite into -->
    <div style="height: 0; width: 0; position: absolute; visibility: hidden" id="svg-sprite"></div>


    <div id="app" ng-controller="BeerfestController as beerfest">
        <header class="app-banner">
            <div class="branding l-flex l-center">
                <div class="l-col-fluid"><svg class="beerfest-logo"><use xlink:href="#svg--logo"></use></svg></div>

                <ul class="l-col-fit l-pad-left util-nav">
                    <li><svg class="icon--user"><use xlink:href="#svg--icon--user"></use></svg></li>
                    <li><svg class="icon--close"><use xlink:href="#svg--icon--close"></use></svg></li>
                </ul>
            </div><!-- .branding -->

            <div class="app-nav">
                <ul class="l-flex">
                    <li class="l-col-fluid col-1-5"><svg class="icon--beerlist"><use xlink:href="#svg--icon--bottles"></use></svg></li>
                    <li class="l-col-fluid col-1-5"><svg class="icon--hads"><use xlink:href="#svg--icon--hads"></use></svg></li>
                    <li class="l-col-fluid col-1-5"><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                    <li class="l-col-fluid col-1-5"><svg class="icon--search"><use xlink:href="#svg--icon--search"></use></svg></li>
                    <li class="l-col-fluid col-1-5"><svg class="icon--more"><use xlink:href="#svg--icon--more"></use></svg>
                </ul>
            </div>
        </header><!-- .app-banner -->


        <div class="app-main" ng-controller="BeerlistController as beerlist">

            <div class="all-beers app-beerlist">
                <ul class="all-breweries">
                    <li class="brewery" ng-repeat="(brewery, beers) in allBeers" ng-class="{active: beers.active}">
                        <header class="brewery-name" ng-click="toggleActiveBrewery( brewery )">
                            {{brewery | decode}}

                            <span class="open-close-indicator"></span>
                        </header>

                        <ul class="brewery-beers">
                            <li class="beer l-flex" ng-repeat="(index, beer) in beers.beers">
                                <div class="beer-actionable l-col-fixed">
                                    <ul>
                                        <li><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                                        <li ng-click="beerlist.drinkBeer( beer )"><svg class="icon--checkmark"><use xlink:href="#svg--icon--checkmark"></use></svg></li>
                                    </ul>
                                </div>

                                <div class="beer-info l-col-fluid">
                                    <div class="beer-name">
                                        <strong>{{beer.name}}</strong>
                                    </div><!-- .beer-name -->

                                    <div class="second-row">

                                        <div class="beer-stats l-flex">
                                            <div class="l-col-fluid col-1-2">{{beer.style}}</div>
                                            <div class="l-col-fit">
                                                <label for="">ABV</label>
                                                {{beer.abv}}
                                            </div>
                                            <div class="l-col-fit">
                                                <label for="">Score</label>
                                                {{beer.ba_score}}
                                            </div>
                                        </div><!-- .beer-stats -->

                                        <div class="rating">
                                            <ul class="l-flex">
                                                <li class="col-1-5 l-col-fluid"><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                                                <li class="col-1-5 l-col-fluid"><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                                                <li class="col-1-5 l-col-fluid"><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                                                <li class="col-1-5 l-col-fluid"><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                                                <li class="col-1-5 l-col-fluid"><svg class="icon--starred"><use xlink:href="#svg--icon--star"></use></svg></li>
                                            </ul>
                                        </div><!-- .rating -->

                                    </div><!-- .second-row -->
                                </div><!-- .beer-info -->
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div><!-- .app-main -->

    </div><!-- #app -->






    <script>
        // open a new xmlhttprequest
        var request    = new XMLHttpRequest();

        // select the document we're going to put the sprite into
        var spriteDiv  = document.getElementById("svg-sprite");

        // the path to the source svg sprite
        var spritePath = "svg/build/icons.svg";

        // load up the svg
        request.open('GET', spritePath, true);

        // when the request has been loaded, check to see if the svg has been
        //  loaded alright (based on the given status). If it's good, set the
        //  DOM element's innerHTML to the content from the loaded svg.
        //  Otherwise, throw an error.
        request.onload = function() {
            if (this.status >= 200 && this.status < 400) {
                var resp = this.response;
                spriteDiv.innerHTML = resp;
            } else {
                console.error("There was an error getting the icons");
            }
        };

        // just a check for a request error
        request.onerror = function() {
            console.error("There was an error getting the icons");
        };

        // send the request!
        request.send();
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-20596099-19', 'auto');
      ga('send', 'pageview');

    </script>

</body>
</html>